query ($locale: SiteLocale, $currentDate: DateTime)  {
  page: eventOverview(locale:$locale) {
    ...eventOverview
  },
  pivots: allPivotSections(locale: $locale, filter: {
    routes:{ matches:{ pattern: "events" }}
  }) {
    title
    body
    callToActionLabel
    link {
      title
      url
      page {
        ... on HomeRecord {
          slug
        }
        ... on ServiceOverviewRecord {
          slug
        }
        ... on CaseOverviewRecord {
          slug
        }
        ... on BlogPostOverviewRecord {
          slug
        }
        ... on JobOverviewRecord {
          slug
        }
        ... on AboutRecord {
          slug
        }
        ... on ContactRecord {
          slug
        }
      }
    }
  }
  upcomingEvents: allEventItems(
    locale: $locale,
    first: 10,
    orderBy: date_ASC,
    filter: {
      date: { gte: $currentDate }
    }
  ) {
    ...event,
    image {
      url,
      alt,
      format,
      width,
      height
    },
    label {
      label
    }
  },
  pastEvents: allEventItems(
    locale: $locale,
    first: 3,
    orderBy: date_DESC,
    filter: {
      date: { lt: $currentDate }
    }
  ) {
  	...event
  },
}

fragment eventOverview on EventOverviewRecord {
  title,
  subtitle,
  slug,
  social {
    title,
    description
  },
  headerIllustration {
    url,
    alt
  },
  introductionText,
  keywords
}

fragment event on EventItemRecord {
  date,
  description,
  title,
  slug,
  url,
}
